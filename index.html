<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <div class="container-fluid">
      <h2>Steelers Watchface</h2>

      <form class="form-horizontal">
        <div class="form-group">
          <label for="AppKeyAnimations" class="control-label col-sm-2">Enable animations</label>
          <input id="AppKeyAnimations" type="checkbox" />
        </div>
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <input class="btn btn-default" id="submit_button" type="button" value="Done" />
          </div>
      </form>

    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </body>
  <script>
    // Get a handle to the button's HTML element
  var submitButton = document.getElementById('submit_button');

  function getParameterByName(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
  }

  // Add a 'click' listener
  submitButton.addEventListener('click', function() {
    // Get the config data from the UI elements
    var animationsCheckbox = document.getElementById('AppKeyAnimations');

    // Make a data object to be sent, coercing value types to integers
    var options = {
      'AppKeyAnimations': animationsCheckbox.checked ? 1 : 0
    };

    // Determine the correct return URL (emulator vs real watch)
    var return_to = getParameterByName('return_to') || 'pebblejs://close#';

    // Encode and send the data when the page closes
    document.location = return_to + encodeURIComponent(JSON.stringify(options));
  });

  $(document).ready(function() {
    var animationsEnabled = getParameterByName('AppKeyAnimations');
    document.getElementById('AppKeyAnimations').checked = animationsEnabled == 1;
  });
</script>
</html>
